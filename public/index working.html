<!DOCTYPE html>
<html lang="en-US">
<head>
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>

    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>


    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>LOCUS</title>


<style type="text/css">
#mapContainer {
    height: 650px;
}

#mapCanvas {
    width: 100%;
    height: 100%;
}
</style>

</head>




<body>
<pre id="test">
</pre>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUd-hJtGy3ynUFIib3vQyagZ0GznInEoQ"></script>

<script>
//Firebase Stuff
var user = document.location.toString().substring(39,document.location.length);

var lati;
    var longi;
    var map;
    var directionsService;
    var directionsDisplay;
    var listOfObjects = [];
    var myLatLng;
    
    

  const config = {
    apiKey: "AIzaSyCN7rik4ofjrupxD9QxYzUyKxKnPPV2j9A",
    authDomain: "tracker-152008.firebaseapp.com",
    databaseURL: "https://tracker-152008.firebaseio.com",
    storageBucket: "tracker-152008.appspot.com/"
  };
  firebase.initializeApp(config);

//const preObject = document.getElementById('object');
const dbRefObject = new Firebase("https://tracker-152008.firebaseio.com/coordinates");

  /*dbRefObject.on('value', snap => {
  //preObject.innerText=JSON.stringify(snap.val(),null,3);
  
            lati= parseFloat(snap.val().latitude);
            longi= parseFloat(snap.val().longitude);

    test.innerText = lati + " | " + longi;

//myLatLng = {lat: lati, lng: longi}; //for markers

        


       //moveMarker(map,marker,lati,longi);

  });*/


        



dbRefObject.on('value', function(snapshot) {

    
    snapshot.forEach(function(childSnapshot) {
      //var childData = childSnapshot.val();

      var singleObj = {}
    singleObj[0] = childSnapshot.val().Name;
    singleObj[1] = childSnapshot.val().Info;
    singleObj[2] = parseFloat(childSnapshot.val().latitude);
    singleObj[3] = parseFloat(childSnapshot.val().longitude);

    listOfObjects.push(singleObj);


    });
test.innerText = listOfObjects[2][0] + " | " + listOfObjects[2][1] + " | " + listOfObjects[2][2] + " | " + listOfObjects[2][3];

});


//Now the Map Features
function initMap() {
    var map;
    var bounds = new google.maps.LatLngBounds();
    var mapOptions = {
        mapTypeId: 'roadmap'
    };
                    
    // Display a map on the web page
    map = new google.maps.Map(document.getElementById("mapCanvas"), mapOptions);
    map.setTilt(50);
        
    // Multiple markers location, latitude, and longitude
    var markers = [
        ['Shoaib Wattoo', 31.5546, 74.3572],
        ['Zain', 32.5711, 74.0750],
        ['Imran Ashraf', 30.8090, 73.4508],
		['Qasim Ch', 32.1544, 74.1842]
    ];
                        
    // Info window content
    var infoWindowContent = [
        ['<div class="info_content">' +
        '<h3>Shoaib Wattoo, Lahore, PK</h3>' +
        '<p>Lahore is the capital city of the Pakistani province of Punjab. It is the second largest and most populous city in Pakistan, after Karachi, and the 32nd most populous urban city in the world</p>' + '</div>'],
        ['<div class="info_content">' +
        '<h3>Zain, Gujrat City, PK</h3>' +
        '<p>Gujrat, is a city in Punjab Province of Pakistan. It is the capital of Gujrat District and the 18th largest city of Pakistan. Gujrat Tehsil subdivision in the Punjab Province.</p>' +
        '</div>'],
        ['<div class="info_content">' +
        '<h3>Imran Ashraf, Okara, PK</h3>' +
        '<p>Okara, is the capital city of Okara District in the Punjab province of Pakistan. The name Okara is derived from Okaan, the name of a type of tree</p>' +
        '</div>'],
        ['<div class="info_content">' +
        '<h3>Qasim Ch, Gujranwala, PK</h3>' +
        '<p>Gujranwala is an industrial city in Gujranwala District in the province of Punjab in Pakistan. Gujranwala is 226 metres above sea level and is the seventh-most-populous of the Pakistani metropolitan areas.</p>' +
        '</div>']
    ];
        
    // Add multiple markers to map
    var infoWindow = new google.maps.InfoWindow(), marker, i;
    
    // Place each marker on the map  

    for( i = 0; i < markers.length; i++ ) {
        var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
        bounds.extend(position);
        marker = new google.maps.Marker({
            position: position,
            map: map,
            title: markers[i][0]
        });
        
        // Add info window to marker    
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infoWindow.setContent(infoWindowContent[i][0]);
                infoWindow.open(map, marker);
            }
        })(marker, i));

        // Center the map to fit all markers on the screen
        map.fitBounds(bounds);
    }

    // Set zoom level
    var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function(event) {
        this.setZoom(8);
        google.maps.event.removeListener(boundsListener);
    });
    
}
// Load initialize function
google.maps.event.addDomListener(window, 'load', initMap);
</script>
<div id="mapContainer">
    <div id="mapCanvas"></div>
</div>

</body>
</html>